(()=>{"use strict";var e={365:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(601),o=n.n(r),a=n(314),s=n.n(a)()(o());s.push([e.id,"body {\n  background-color: rgb(41, 41, 41);\n  color: white;\n}\n\n.content {\n  display: flex;\n  flex-direction: column;\n  gap: 50px;\n}\n\n.playerAreas {\n  display: grid;\n  grid-template: repeat(auto-fit, minmax(200px, 400px)) / repeat(\n      auto-fit,\n      minmax(200px, 400px)\n    );\n\n  gap: 50px;\n\n  justify-content: center;\n}\n\n.playerArea {\n  aspect-ratio: 1 / 1; /* Ensures the height matches the width */\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.playerBoard {\n  display: grid;\n  grid-template: repeat(6, 1fr) / repeat(6, 1fr);\n  flex: 1;\n}\n\n.cell {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  border-style: solid;\n  border-width: 2px;\n\n  font-size: xx-large;\n  background-color: rgb(83, 83, 83);\n}\n\n.playerName {\n  font-weight: bold;\n}\n\n.logs {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.logsHeader{\n  font-size: xx-large;\n}\n\n.logsContent {\n  overflow: scroll;\n  overflow-y: auto; /* Enable vertical scrolling */\n  overflow-x: hidden;\n  max-height: 180px;\n  max-width: 200px;\n}\n",""]);const i=s},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&s[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},s=[],i=0;i<e.length;i++){var l=e[i],c=r.base?l[0]+r.base:l[0],u=a[c]||0,d="".concat(c," ").concat(u);a[c]=u+1;var p=n(d),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var h=o(f,r);r.byIndex=i,t.splice(i,0,{identifier:d,updater:h,references:1})}s.push(d)}return s}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var s=0;s<a.length;s++){var i=n(a[s]);t[i].references--}for(var l=r(e,o),c=0;c<a.length;c++){var u=n(a[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=l}}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,n.d({},{mq:()=>$,iV:()=>W,NH:()=>J,wh:()=>V,$5:()=>q});var r=n(72),o=n.n(r),a=n(825),s=n.n(a),i=n(659),l=n.n(i),c=n(56),u=n.n(c),d=n(540),p=n.n(d),f=n(113),h=n.n(f),m=n(365),y={};y.styleTagTransform=h(),y.setAttributes=u(),y.insert=l().bind(null,"head"),y.domAPI=s(),y.insertStyleElement=p(),o()(m.A,y),m.A&&m.A.locals&&m.A.locals;class v{#e;#t;#n;constructor(e,t,n){this.#e=e,this.#t=t,this.#n=n}get id(){return this.#e}get name(){return this.#t}get board(){return this.#n}hasLostAllShips(){return this.#n.areAllShipsDestroyed()}recieveHit(e){this.#n.recieveHit(e)}}const g=[];function x(e,t,n){const r=new v(e,t,n);return g.push(r),r}class b{#r=!1;#o;#a;constructor(e,t,n){this.#o=e,this.#a=t,this.containsPartOfShip=n}get isShot(){return this.#r}get row(){return this.#o}get column(){return this.#a}onGotHit(){if(this.#r)throw"Cell got shot twice";this.#r=!0}}function S(e,t,n){return new b(e,t,n)}class C{#s;#i=[];#l=0;constructor(e){this.#i=e,this.#s=e.length}get cells(){return[...this.#i]}get isDestroyed(){return this.#l>=this.#s}onGotHit(){++this.#l}}class E{#i=[];#c=[];constructor(e,t){this.#u(e),this.#d(t)}#u(e){const t=e;for(let n=0;n<e;n++)for(let e=0;e<t;e++){const t=S(n,e,!1);this.#i.push(t)}}#d(e){e.forEach((e=>{const t=this.#i.filter((t=>t.row>=e.rowStart&&t.row<=e.rowEnd&&t.column>=e.columnStart&&t.column<=e.columnEnd));t.forEach((e=>{e.containsPartOfShip=!0}));const n=new C(t);this.#c.push(n)}))}get cells(){return[...this.#i]}get ships(){return[...this.#c]}areAllShipsDestroyed(){return this.#c.every((e=>!0===e.isDestroyed))}recieveHit(e){const t=this.#i[e];!t.isShot&&(t.onGotHit(),t.containsPartOfShip)&&this.#c.find((e=>e.cells.includes(t))).onGotHit()}getNotShotCells(){return this.#i.filter((e=>!e.isShot))}}function w(e,t){return new E(e,t)}const A=document.querySelector(".playerAreas"),I=document.querySelector(".logsContent"),N=[];function P(e,t,n,r,o){const a=e,s=document.createElement("div");s.className="playerArea",A.appendChild(s);const i=document.createElement("div");i.className="playerName",i.textContent=n,s.appendChild(i);const l=document.createElement("div");l.className="playerBoard",s.appendChild(l);const c=[];for(let n=0;n<e;n++)for(let e=0;e<a;e++){const e=document.createElement("div");e.className="cell",l.appendChild(e),c.push(e),t!==q&&(e.addEventListener("click",L),e.addEventListener("mouseenter",H),e.addEventListener("mouseleave",O))}if(r)for(let e=0;e<o.length;e++)o[e].containsPartOfShip&&(c[e].textContent="X");N.push({playerId:t,cells:c,playerNameElement:i,boardCells:o})}function L(e){if(J)return;if($!==q)return;const t=e.target,n=N.find((e=>e.cells.includes(t)));V(n.playerId)||function(e,t){const n=new CustomEvent("onPlayerAttacked",{detail:{targetPlayerID:e,targetCellIndex:t}});document.dispatchEvent(n)}(n.playerId,n.cells.indexOf(t))}function H(e){if(J)return;if($!==q)return;const t=e.target,n=N.find((e=>e.cells.includes(t)));V(n.playerId)||n.boardCells[n.cells.indexOf(t)].isShot||(t.style.backgroundColor="aqua")}function O(e){if(J)return;if($!==q)return;const t=e.target,n=N.find((e=>e.cells.includes(t)));V(n.playerId)||n.boardCells[n.cells.indexOf(t)].isShot||(t.style.backgroundColor="rgb(83, 83, 83)")}function k(e,t,n){const r=N.find((t=>t.playerId===e)).cells[t];r.style.backgroundColor="rgb(83, 83, 83)",n?r.style.backgroundColor="red":r.style.opacity=.1}const T=document.querySelector(".numOfPCsInput");function M(e,t){N.forEach((e=>{const t=W(e.playerId);t.hasLostAllShips()||(e.playerNameElement.style.color="white",e.playerNameElement.textContent=t.name)}));const n=N.find((t=>t.playerId===e));n.playerNameElement.style.color="yellow",n.playerNameElement.textContent=e===q?t+"  (Your turn)":t+"  (This PC's turn)"}T.addEventListener("change",(function(){null!=T.value&&0!=T.value||(T.value=2),T.value>9&&(T.value=9)})),document.querySelector(".startGameButton").addEventListener("click",(function(){N.length=0,A.replaceChildren(),I.replaceChildren();const e=new CustomEvent("onGameStarted",{detail:{pcsCount:T.value}});document.dispatchEvent(e)}));const G=[],q=0;let D,j;function B(e){return Math.floor(Math.random()*e)}let $=0;function z(e){const t=U().filter((t=>t!==e)),n=t[B(t.length)],r=n.board.getNotShotCells(),o=B(r.length),a=n.board.cells.indexOf(r[o]);F(e,n,a)}function F(e,t,n){var r,o;r=t.id,o=n,g.find((e=>e.id===r)).recieveHit(o);const a=t.board.cells[n].containsPartOfShip;k(t.id,n,a),function(e,t){const n=document.createElement("div");n.textContent=`${e} has attacked ${t}`,I.insertBefore(n,I.firstChild)}(e.name,t.name),t.hasLostAllShips()&&(function(e){const t=g.find((t=>t.id===e));t.board.cells.forEach((e=>{t.recieveHit(t.board.cells.indexOf(e))}))}(t.id),function(e,t){const n=N.find((t=>t.playerId===e));n.playerNameElement.textContent+=" (Lost)",n.playerNameElement.style.color="red";for(let n=0;n<t.length;n++)k(e,n,t[n].containsPartOfShip)}(t.id,t.board.cells))}function R(){$=($+1)%G.length,G[$].hasLostAllShips()?R():(j=G[$],M($,j.name))}function U(){return G.filter((e=>!e.hasLostAllShips()))}function Y(e){return new Promise((t=>setTimeout(t,e)))}function _(){return 1===U().length?(function(e){const t=N.find((t=>t.playerId===e));t.playerNameElement.textContent+=" (Winner)",t.playerNameElement.style.color="Green"}(U()[0].id),J=!0,!0):(J=!1,!1)}document.addEventListener("onPlayerAttacked",(function(e){if(j!=D)return;const t=e.detail.targetPlayerID,n=G[t];if(n===D)return;const r=e.detail.targetCellIndex;n.board.cells[r].isShot||(F(D,n,r),_()||(R(),async function(){for(;j!=D&&!_();)z(j),await Y(200),R()}()))}));let J=!1;function V(e){return G[e].hasLostAllShips()}function W(e){return G[e]}document.addEventListener("onGameStarted",(function(e){J=!1,g.length=0,function(e){G.length=0;const t=e+1;for(let e=0;e<t;e++){const t=[];let n=0;for(;n<15;){const e=B(6),r=B(6),o={rowStart:e,rowEnd:e,columnStart:r,columnEnd:r};t.some((e=>e.rowStart===o.rowStart&&e.rowEnd===o.rowEnd&&e.columnStart===o.columnStart&&e.columnEnd===o.columnEnd))||(t.push(o),++n)}const r=w(6,t),o=x(e,e===q?"You":`PC:${e}`,r);G.push(o),P(6,o.id,o.name,e===q,o.board.cells)}D=G[q],j=D,$=0,M(j.id,j.name)}(parseInt(e.detail.pcsCount))}))})();